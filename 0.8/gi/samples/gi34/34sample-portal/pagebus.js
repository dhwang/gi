/**
 * Copyright (c) 2006-2007, TIBCO Software Inc.
 * Use, modification, and distribution subject to terms of license.
 * 
 * TIBCO(R) PageBus 1.0.0
 */

if(typeof window.PageBus=="undefined"){PageBus={version:"1.0.0",S:{c:{},s:[]},X:0,P:0,U:[],H:"undefined"};PageBus.subscribe=function(f,a,c,q){if(f==null||f.indexOf("pagebus.private.")==0)this.y3();if(a==null)a=window;var jc=f.split(".");var Pb={f:c,d:q,i:this.X++ ,p:jc,w:a};for(var Gb=0;Gb<jc.length;Gb++)if(jc[Gb].indexOf("*")!=-1&&jc[Gb]!="*"&&jc[Gb]!="**")this.y3();this.ON(this.S,jc,0,Pb);return Pb;};PageBus.publish=function(h,k){if(h==null||h.indexOf("*")!=-1)this.y3();var ib=h.split(".");if(this.P>100)this.Y9("StackOverflow");try{this.P++;this.dF(this.S,ib,0,h,k);}catch(Jc){this.P--;throw Jc;}try{this.P--;if(this.U.length>0&&this.P==0){for(var ac=0;ac<this.U.length;ac++)this.unsubscribe(this.U[ac]);this.U=[];}}catch(Jc){}};PageBus.unsubscribe=function(f){this.DN(this.S,f.p,0,f.i);};PageBus.Y9=function(a){throw new Error("PageBus."+a);};PageBus.y3=function(f){this.Y9("BadName");};PageBus.ON=function(o,i,j,c){var bb=i[j];if(bb=="")this.y3();if(j==i.length)o.s.push(c);else{if(typeof o.c==this.H)o.c={};if(typeof o.c[bb]==this.H){try{o.c[bb]={c:{},s:[]};this.ON(o.c[bb],i,j+1,c);}catch(Jc){delete o.c[bb];throw Jc;}}else this.ON(o.c[bb],i,j+1,c);}};PageBus.dF=function(i,k,p,r,f){if(k[p]=="")this.y3();if(typeof i!=this.H)if(p<k.length){this.dF(i.c[k[p]],k,p+1,r,f);this.dF(i.c["*"],k,p+1,r,f);this.FY(i.c["**"],r,f);}else this.FY(i,r,f);};PageBus.FY=function(o,d,k){if(typeof o!=this.H){var jb=o.s;var Db=jb.length;for(var H=0;H<Db;H++)if(jb[H].f!=null)jb[H].f.apply(jb[H].w,[d,k,jb[H].d]);}};PageBus.DN=function(h,e,q,b){if(typeof h!=this.H)if(q<e.length){var Vb=h.c[e[q]];this.DN(Vb,e,q+1,b);if(Vb.s.length==0){for(var rb in Vb.c)return;delete h.c[e[q]];}return;}else{var z=h.s;var hc=z.length;for(var Z=0;Z<hc;Z++)if(b==z[Z].i){if(this.P>0){if(z[Z].f==null)this.Y9("BadParameter");z[Z].f=null;this.U.push(z[Z]);}else z.splice(Z,1);return;}}this.Y9("BadParameter");};}

