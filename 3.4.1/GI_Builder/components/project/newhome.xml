<!--
  ~ Copyright (c) 2001-2007, TIBCO Software Inc.
  ~ Use, modification, and distribution subject to terms of license.
  -->
<serialization xmlns="urn:tibco.com/v3.0">
 <name><![CDATA[Dialog]]></name>
 <icon><![CDATA[]]></icon>
 <description><![CDATA[Dialog box.  (Set Modal property for a modal dialog).]]></description>
 <onBeforeDeserialize><![CDATA[]]></onBeforeDeserialize>
 <onAfterDeserialize><![CDATA[
 
objJSX.doBrowse = function() {
  jsx3.require("jsx3.io.FileDialog");
 
  var d = jsx3.io.FileDialog.deserialize(jsx3.IDE.getRootBlock(), "newhomedialog", true);
  
  var strValue = this.getDescendantOfName("homepath").getValue();
  var objFolder = new jsx3.io.File(strValue);
  while (! objFolder.isDirectory())
    objFolder = new jsx3.io.File(objFolder.getParentPath());
  
  d.setDialogTitle("Choose Workspace Folder");
  d.setExecButtonLabel("Choose");
  
  var me = this;
  d.onExecute = function(objFile) {
    me.onBrowseChoose(objFile);
  };

  d.openForOpen(objFolder, null, jsx3.io.FileDialog.CHOOSE_FOLDER);
};

objJSX.onBrowseChoose = function(objFile) {
  this.getDescendantOfName("homepath").setValue(objFile.getAbsolutePath());
};

objJSX.doCreate = function() {
  var strValue = this.getDescendantOfName("homepath").getValue();
  
  if (strValue) {
    var objFile = new jsx3.io.File(strValue);
    if (jsx3.ide.onSelectNewUserHome(objFile, jsx3.IDE)) {
      jsx3.IDE.alert(null, "You must reload General Interface Builder to use your new workspace.",
          function() {window.location.reload()}, "Reload Browser");
    }
  } else {
    this.beep();
    this.onInit();
  }
};

objJSX.onInit = function() {
  var home = jsx3.io.File.getUserDocuments();
  var giuser = new jsx3.io.File(home, jsx3.ide.DEFAULT_USER_HOME);
  this.getDescendantOfName("homepath").setValue(giuser.getAbsolutePath());
};

objJSX.registerHotKey('doCreate', jsx3.gui.Event.KEY_ENTER, false, false, false);
 
objJSX.onInit();

 ]]></onAfterDeserialize>
  <object type="jsx3.gui.Dialog">
   <dynamics jsxbgcolor="@Solid Medium"/>
   <variants jsxresize="0" jsxmodal="0" />
   <strings jsxname="jsx_ide_newhome" jsxwidth="450" jsxheight="175"/>
    <object type="jsx3.gui.WindowBar">
     <variants/>
     <strings jsxname="caption bar" jsxtext="Create or Locate a Workspace"/>
       <object type="jsx3.gui.ToolbarButton">
         <dynamics jsximage="@Min Icon" jsxtip="@Min Tip"/>
         <variants/>
         <strings jsxname="min button"/>
         <events jsxexecute="this.getAncestorOfType(jsx3.gui.Dialog).doToggleState();"/>
       </object>
    </object>
    <object type="jsx3.gui.LayoutGrid">
     <variants jsxrelativeposition="0" jsxleft="0" jsxtop="0" jsxoverflow="2"/>
     <strings jsxname="layout (--)" jsxwidth="100%" jsxheight="100%" jsxrows="*,36,36"/>
      <object type="jsx3.gui.Block">
       <dynamics jsxpadding="@8Pixel"/>
       <variants jsxoverflow="2"/>
       <strings jsxname="pane" jsxwidth="100%" jsxheight="100%" jsxtext="Your workspace could not be found. A workspace contains your projects, custom addins, and prototypes, as well as your user settings for General Interface&#8482; Builder. Use the browse button to locate an existing workspace or create a new one."/>
      </object>
      <object type="jsx3.gui.Block">
       <variants jsxoverflow="1"/>
       <strings jsxname="pane" jsxwidth="100%" jsxheight="100%"/>
        <object type="jsx3.gui.LayoutGrid">
         <variants jsxrelativeposition="0" jsxleft="0" jsxtop="0" jsxoverflow="2"/>
         <strings jsxname="layout ( | )" jsxwidth="100%" jsxheight="100%" jsxcols="*,40"/>
          <object type="jsx3.gui.Block">
           <dynamics jsxpadding="@8Pixel"/>
           <variants jsxoverflow="2"/>
           <strings jsxname="pane" jsxwidth="100%" jsxheight="100%"/>
            <object type="jsx3.gui.TextBox">
             <variants jsxheight="18" jsxenabled="1"/>
             <strings jsxname="homepath" jsxwidth="100%"/>
             <events/>
            </object>
          </object>
          <object type="jsx3.gui.Block">
           <variants jsxoverflow="1"/>
           <strings jsxname="pane" jsxwidth="100%" jsxheight="100%" jsxpadding="5"/>
            <object type="jsx3.gui.ToolbarButton">
             <variants/>
             <strings jsxname="toolbar button" jsximage="images/icon_60.gif"/>
             <events jsxexecute="this.getAncestorOfType(jsx3.gui.Dialog).doBrowse();"/>
            </object>
          </object>
        </object>
      </object>
      <object type="jsx3.gui.Block">
       <dynamics jsxpadding="@8Pixel"/>
       <variants jsxoverflow="1"/>
       <strings jsxname="pane" jsxwidth="100%" jsxheight="100%" jsxtextalign="right"/>
        <object type="jsx3.gui.Button">
         <variants jsxindex="0" jsxheight="18"/>
         <strings jsxname="button" jsxtext="Choose" jsxmargin="0 4 0 0" jsxfontweight="bold"/>
         <events jsxexecute="this.getAncestorOfType(jsx3.gui.Dialog).doCreate();"/>
        </object>
      </object>
    </object>
  </object>
</serialization>
