<?xml version="1.0" ?>
<!--
  ~ Copyright (c) 2001-2007, TIBCO Software Inc.
  ~ Use, modification, and distribution subject to terms of license.
  -->
<serialization xmlns="urn:tibco.com/v3.0" >
 <name><![CDATA[]]></name>
 <icon><![CDATA[]]></icon>
 <description><![CDATA[]]></description>
 <onBeforeDeserialize><![CDATA[]]></onBeforeDeserialize>
  <onAfterDeserialize><![CDATA[

objJSX.doActivate = function() {
  jsx3.sleep(this._doActivate, "jsx3.ide.palette.attributes", this, true);
};

objJSX.doDeactivate = function() {
  jsx3.sleep(this._doDeactivate, "jsx3.ide.palette.attributes", this, true);
};

objJSX._doActivate = function() {
  if (jsx3.ide.getSelected().length > 0)
    this.getDescendantOfName('jsxattributes_editor').setDisplay(jsx3.gui.Block.DISPLAYBLOCK, true);
};

objJSX._doDeactivate = function() {
  this.getDescendantOfName('jsxattributes_editor').setDisplay(jsx3.gui.Block.DISPLAYNONE, true);
};

objJSX.doCleanup = function() {
  jsx3.IDE.unsubscribe(jsx3.ide.events.COMPONENT_EDITOR_DID_ACTIVATE, this);
  jsx3.IDE.unsubscribe(jsx3.ide.events.COMPONENT_EDITOR_DID_DEACTIVATE, this);
};

objJSX.attributeExec = function() {
  var nameField = this.getDescendantOfName('jsxattribute_name');
  var valueField = this.getDescendantOfName('jsxattribute_value');
  var name = nameField.getValue();
  var value = valueField.getValue();

  if (name && value) {
    jsx3.ide.onAttributeAdd(name, value);
    nameField.setValue("");
    valueField.setValue("");
    nameField.focus();
  }
};

jsx3.IDE.subscribe(jsx3.ide.events.COMPONENT_EDITOR_DID_ACTIVATE, objJSX, "doActivate");
jsx3.IDE.subscribe(jsx3.ide.events.COMPONENT_EDITOR_DID_DEACTIVATE, objJSX, "doDeactivate");

if (jsx3.ide.getSelected().length > 0) {
  jsx3.ide.onAttributeChange();
  objJSX.doActivate();
} else {
  objJSX.doDeactivate();
}

var nameField = objJSX.getDescendantOfName('jsxattribute_name');
var valueField = objJSX.getDescendantOfName('jsxattribute_value');

nameField._regex = /^[_A-Za-z]\w*$/;
valueField._regex = /^[^"]*$/;

valueField.validateKey = function(strValue) {
  if (strValue && ! this._regex.test(strValue)) {
    this.beep();
    return false;
  }
  return true;
};

nameField.validateKey = valueField.validateKey;

objJSX.registerHotKey(jsx3.ide.onAttributeDelete, jsx3.gui.Event.KEY_DELETE, false, true, false); // delete

  ]]></onAfterDeserialize>
  <object type="jsx3.gui.Block">
   <dynamics jsxborder="@Outset" />
   <variants jsxleft="0" jsxtop="0" jsxoverflow="1" />
   <strings jsxname="jsx_ide_attributes_contentblock" jsxwidth="100%" jsxheight="100%" jsxhelpid="ide.palette.attr"/>
   <events jsxdestroy="this.doCleanup();" />
    <object type="jsx3.gui.Block">
     <dynamics jsxtext="_atted_title"/>
     <variants jsxleft="0" jsxtop="0" jsxoverflow="1" jsxwidth="0" jsxheight="0" jsxrelativeposition="0" />
     <strings jsxname="jsx_ide_palette_title" jsxvisibility="hidden" />
    </object>
    <object type="jsx3.gui.LayoutGrid">
     <variants jsxrelativeposition="0" jsxleft="0" jsxtop="0" jsxoverflow="2" />
     <strings jsxname="jsxattributes_editor" jsxwidth="100%" jsxheight="100%" jsxrows="48,*"/>
      <object type="jsx3.gui.Block">
       <dynamics jsxbgcolor="@Solid Medium" />
       <variants jsxoverflow="2" jsxrelativeposition="1" />
       <strings jsxname="jsxattributes_namevalueeditor" jsxwidth="100%" jsxheight="100%" jsxpadding="22 6 0 98" jsxtextalign="right" />
        <object type="jsx3.gui.Block">
         <dynamics jsxfontname="@Label1 FN" jsxfontsize="@Label1 FS" jsxfontweight="@Label1 FW" jsxtext="_gen_name"/>
         <variants jsxrelativeposition="0" jsxleft="6" jsxtop="8" jsxwidth="60" />
         <strings jsxname="jsxlabel" jsxtextalign="right" />
        </object>
        <object type="jsx3.gui.Block">
         <dynamics jsxfontname="@Label1 FN" jsxfontsize="@Label1 FS" jsxfontweight="@Label1 FW" jsxtext="_gen_value"/>
         <variants jsxrelativeposition="0" jsxleft="6" jsxtop="28" jsxwidth="60" />
         <strings jsxname="jsxlabel" jsxtextalign="right" />
        </object>
        <object type="jsx3.gui.TextBox">
         <variants jsxrelativeposition="0" jsxleft="70" jsxtop="6" />
         <strings jsxname="jsxattribute_name" jsxwidth="100%" />
         <events jsxexecute="this.getParent().getChild('jsxattribute_value').focus();" jsxincchange="this.validateKey(strVALUE);" />
        </object>
        <object type="jsx3.gui.TextBox">
         <variants jsxrelativeposition="0" jsxleft="70" jsxtop="26" />
         <strings jsxname="jsxattribute_value" jsxwidth="100%" />
         <events jsxexecute="this.getAncestorOfName('jsx_ide_attributes_contentblock').attributeExec();" jsxincchange="this.validateKey(strVALUE);"/>
        </object>
        <object type="jsx3.gui.ToolbarButton">
         <dynamics jsxtip="_atted_add"/>
         <strings jsxname="jsxaddattribute" jsxleft="100%" jsximage="jsx:///images/tree/plus.gif" />
         <events jsxexecute="this.getAncestorOfName('jsx_ide_attributes_contentblock').attributeExec();"/>
        </object>
      </object>
      <object type="jsx3.gui.Block">
       <dynamics jsxborder="@Inset Top" jsxbgcolor="@Solid Medium" />
       <variants jsxoverflow="2" />
       <strings jsxname="jsxcontainer" jsxwidth="100%" jsxheight="100%" />
        <object type="jsx3.gui.Matrix">
         <dynamics jsxbgcolor="@Solid Light" jsxbodyborder="@Outset" jsxheaderborder="@Outset NoBottom"/>
         <variants jsxpagingmodel="1" jsxselectionmodel="0" jsxscalewidth="1" jsxresize="1" jsxreorder="0" jsxheaderheight="21"/>
         <strings jsxname="jsxattributes" jsxsortpath="" jsxsortdirection="ascending" jsxmenu="jsxmenu_attributes" jsxfocusstyle=";"/>
         <events jsxafteredit="jsx3.ide.onAttributeEdit(strRECORDID, strNEWVALUE, this);"
             jsxmenu="strRECORDID != null &amp;&amp; strRECORDID != '';" />
          <object type="jsx3.gui.Matrix.Column">
           <dynamics jsxtext="_gen_name" jsxbg="@Fade TopDown" jsxborder="@Outset"
               jsxcellbgcolor="@Matrix HeaderCol BG" jsxcellborder="@Matrix HeaderCol Border"/>
           <strings jsxname="jsxattributes_name" jsxcellpadding="3" jsxpadding="3" jsxwidth="120" jsxpath="jsxtext"
               jsxcellbgcolor="#c8c8d5" jsxcellborder="0px;1px solid #9898a5;1px solid #9898a5;0px" />
          </object>
          <object type="jsx3.gui.Matrix.Column">
           <dynamics jsxtext="_gen_value" jsxbg="@Fade TopDown" jsxborder="@Outset"
               jsxcellbgcolor="@Matrix ValueCol BG" jsxcellborder="@Matrix ValueCol Border"/>
           <strings jsxname="jsxattributes_value" jsxcellpadding="3" jsxpadding="3" jsxwidth="*" jsxpath="value"
               jsxvaluetemplate="&lt;xsl:template xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;
&lt;xsl:choose&gt;
  &lt;xsl:when test=&quot;@value=''&quot;&gt;&lt;span class=&quot;jsx3ide_props_emptystring&quot;&gt;[empty]&lt;/span&gt;&lt;/xsl:when&gt;
  &lt;xsl:when test=&quot;@jsxmulti&quot;&gt;&lt;span class=&quot;jsx3ide_props_multi&quot;&gt;[multiple values]&lt;/span&gt;&lt;/xsl:when&gt;
  &lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;@value&quot; /&gt;&lt;/xsl:otherwise&gt;
&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;"/>
            <object type="jsx3.gui.TextBox">
             <strings jsxname="jsxmask_attstext" />
            </object>
          </object>
        </object>
         <object type="jsx3.gui.Menu">
          <dynamics jsxxmlurl="mnuAttributes"/>
          <strings jsxname="jsxmenu_attributes" jsxdisplay="none"/>
         </object>
      </object>
    </object>
  </object>
</serialization>
